{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/lib/mongodb.ts"],"sourcesContent":["import { MongoClient } from \"mongodb\";\r\n\r\nif (!process.env.MONGODB_URI) {\r\n  throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\r\n}\r\n\r\nconst uri = process.env.MONGODB_URI;\r\nconst options = {};\r\n\r\nlet client: MongoClient;\r\nlet clientPromise: Promise<MongoClient>;\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  // In development mode, use a global variable to preserve the value \r\n  // across module reloads caused by HMR (Hot Module Replacement).\r\n  let globalWithMongo = global as typeof globalThis & {\r\n    _mongoClientPromise?: Promise<MongoClient>;\r\n  };\r\n\r\n  if (!globalWithMongo._mongoClientPromise) {\r\n    client = new MongoClient(uri, options);\r\n    globalWithMongo._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = globalWithMongo._mongoClientPromise;\r\n} else {\r\n  // In production mode, it's best to avoid using a global variable.\r\n  client = new MongoClient(uri, options);\r\n  clientPromise = client.connect();\r\n}\r\n\r\n// Export a module-scoped MongoClient promise. \r\n// By doing this, the client can be shared across all Server Actions.\r\nexport default clientPromise;"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAAU,CAAC;AAEjB,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,oEAAoE;IACpE,gEAAgE;IAChE,IAAI;IAIJ,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,oKAAW,CAAC,KAAK;QAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,gBAAgB,mBAAmB;AACrD;;uCAQe"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport Credentials from \"next-auth/providers/credentials\";\r\nimport clientPromise from \"@/lib/mongodb\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport const { handlers, auth, signIn, signOut } = NextAuth({\r\n  providers: [\r\n    Credentials({\r\n      name: \"Credentials\",\r\n      async authorize(credentials) {\r\n        if (!credentials?.email || !credentials?.password) return null;\r\n\r\n        const client = await clientPromise;\r\n        const db = client.db(\"mirrorDB\");\r\n        \r\n        // Find user by email\r\n        const user = await db.collection(\"users\").findOne({ \r\n          email: (credentials.email as string).toLowerCase() \r\n        });\r\n\r\n        if (!user || !user.password) return null;\r\n\r\n        // Verify password\r\n        const isPasswordCorrect = await bcrypt.compare(\r\n          credentials.password as string,\r\n          user.password\r\n        );\r\n\r\n        if (!isPasswordCorrect) return null;\r\n\r\n        // Return the user object with lifeStage included\r\n        // This object is passed to the 'jwt' callback below as 'user'\r\n        return {\r\n          id: user._id.toString(),\r\n          name: user.name,\r\n          email: user.email,\r\n          lifeStage: user.lifeStage, \r\n        };\r\n      },\r\n    }),\r\n  ],\r\n  callbacks: {\r\n    // 1. JWT Callback: Persists the lifeStage into the encrypted token\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        token.id = user.id as string;\r\n        token.lifeStage = user.lifeStage;\r\n      }\r\n      return token;\r\n    },\r\n    // 2. Session Callback: Makes the data available to your Server & Client components\r\n    async session({ session, token }) {\r\n      if (session.user) {\r\n        session.user.id = token.id;\r\n        session.user.lifeStage = token.lifeStage as string;\r\n      }\r\n      return session;\r\n    },\r\n  },\r\n  pages: {\r\n    signIn: \"/login\",\r\n  },\r\n  session: {\r\n    strategy: \"jwt\",\r\n  },\r\n});"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,gKAAQ,EAAC;IAC1D,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU,OAAO;gBAE1D,MAAM,SAAS,MAAM,gIAAa;gBAClC,MAAM,KAAK,OAAO,EAAE,CAAC;gBAErB,qBAAqB;gBACrB,MAAM,OAAO,MAAM,GAAG,UAAU,CAAC,SAAS,OAAO,CAAC;oBAChD,OAAO,AAAC,YAAY,KAAK,CAAY,WAAW;gBAClD;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE,OAAO;gBAEpC,kBAAkB;gBAClB,MAAM,oBAAoB,MAAM,4IAAM,CAAC,OAAO,CAC5C,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,mBAAmB,OAAO;gBAE/B,iDAAiD;gBACjD,8DAA8D;gBAC9D,OAAO;oBACL,IAAI,KAAK,GAAG,CAAC,QAAQ;oBACrB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,WAAW,KAAK,SAAS;gBAC3B;YACF;QACF;KACD;IACD,WAAW;QACT,mEAAmE;QACnE,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,SAAS,GAAG,KAAK,SAAS;YAClC;YACA,OAAO;QACT;QACA,mFAAmF;QACnF,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,SAAS,GAAG,MAAM,SAAS;YAC1C;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,SAAS;QACP,UAAU;IACZ;AACF"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/components/SignOutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SignOutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SignOutButton() from the server but SignOutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/SignOutButton.tsx <module evaluation>\",\n    \"SignOutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,kEACA","ignoreList":[0]}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/components/SignOutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SignOutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SignOutButton() from the server but SignOutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/SignOutButton.tsx\",\n    \"SignOutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,8CACA","ignoreList":[0]}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["import { auth } from \"@/auth\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { \r\n  MessageCircle, \r\n  Target, \r\n  BarChart3, \r\n  ChevronRight, \r\n  Sparkles, \r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { SignOutButton } from \"@/components/SignOutButton\";\r\n\r\nexport default async function DashboardPage() {\r\n  const session = await auth();\r\n  \r\n  if (!session) redirect(\"/login\");\r\n\r\n  const userStage = (session.user as any).lifeStage || \"college\";\r\n  const userName = session.user.name || \"Practitioner\";\r\n\r\n  const modules = [\r\n    {\r\n      title: \"General Chat\",\r\n      desc: \"An open-ended sandbox to practice any conversation with real-time AI mirroring.\",\r\n      href: \"/dashboard/generalchat\",\r\n      icon: MessageCircle,\r\n      color: \"text-blue-600\",\r\n      bg: \"bg-blue-50\",\r\n    },\r\n    {\r\n      title: \"Practice Hub\",\r\n      // Academic Justification: Context-awareness for Level 1 ASD (Article 2)\r\n      desc: `Launch a randomized social scenario calibrated for your ${userStage} environment.`,\r\n      // FIXED: Changed from /practice/start to /practice to prevent 404s\r\n      href: \"/dashboard/practice\",\r\n      icon: Target,\r\n      color: \"text-indigo-600\",\r\n      bg: \"bg-indigo-50\",\r\n    },\r\n    {\r\n      title: \"Analytics\",\r\n      desc: \"Track your social progress, reflection accuracy, and metacognitive trends.\",\r\n      href: \"/dashboard/analytics\",\r\n      icon: BarChart3,\r\n      color: \"text-emerald-600\",\r\n      bg: \"bg-emerald-50\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#F8FAFC] pb-20\">\r\n      <nav className=\"px-8 py-6 flex justify-between items-center bg-white/50 backdrop-blur-md sticky top-0 z-50 border-b border-slate-100\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"p-2 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-100\">\r\n            <Sparkles className=\"w-5 h-5 text-white\" />\r\n          </div>\r\n          <span className=\"font-black text-xl tracking-tighter text-slate-800 uppercase\">\r\n            Conversational Mirror\r\n          </span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-4\">\r\n           <div className=\"hidden md:block px-4 py-2 bg-white rounded-2xl border border-slate-100 shadow-sm text-[10px] font-black uppercase tracking-widest text-slate-400\">\r\n             Mode: <span className=\"text-indigo-600\">{userStage}</span>\r\n           </div>\r\n           <SignOutButton />\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"max-w-5xl mx-auto pt-20 px-6 space-y-12\">\r\n        <header className=\"space-y-2\">\r\n          <h1 className=\"text-5xl font-black text-slate-900 tracking-tight\">\r\n            Welcome, <span className=\"text-indigo-600\">{userName}</span>\r\n          </h1>\r\n          <p className=\"text-slate-500 font-medium text-lg italic\">\r\n            Your personal space for social reflection. Select a module to continue.\r\n          </p>\r\n        </header>\r\n\r\n        <div className=\"space-y-6\">\r\n          {modules.map((m) => (\r\n            <Link key={m.title} href={m.href} className=\"block\">\r\n              <div className=\"group bg-white p-2 pr-10 rounded-[2.5rem] shadow-xl shadow-slate-200/50 hover:shadow-2xl hover:shadow-indigo-100 transition-all duration-500 flex items-center gap-8 border border-white hover:border-indigo-100 hover:scale-[1.01] active:scale-[0.99]\">\r\n                <div className={`w-32 h-32 ${m.bg} rounded-[2rem] flex items-center justify-center shrink-0 group-hover:scale-95 transition-transform duration-500`}>\r\n                  <m.icon className={`${m.color} w-10 h-10`} />\r\n                </div>\r\n                \r\n                <div className=\"flex-grow py-4\">\r\n                  <h3 className=\"text-2xl font-black text-slate-800 tracking-tight mb-1 group-hover:text-indigo-600 transition-colors\">\r\n                    {m.title}\r\n                  </h3>\r\n                  <p className=\"text-slate-500 font-medium leading-relaxed max-w-md\">\r\n                    {m.desc}\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-300 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-inner\">\r\n                  <ChevronRight className=\"w-6 h-6\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,mHAAI;IAE1B,IAAI,CAAC,SAAS,IAAA,iMAAQ,EAAC;IAEvB,MAAM,YAAY,AAAC,QAAQ,IAAI,CAAS,SAAS,IAAI;IACrD,MAAM,WAAW,QAAQ,IAAI,CAAC,IAAI,IAAI;IAEtC,MAAM,UAAU;QACd;YACE,OAAO;YACP,MAAM;YACN,MAAM;YACN,MAAM,yOAAa;YACnB,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,wEAAwE;YACxE,MAAM,CAAC,wDAAwD,EAAE,UAAU,aAAa,CAAC;YACzF,mEAAmE;YACnE,MAAM;YACN,MAAM,gNAAM;YACZ,OAAO;YACP,IAAI;QACN;QACA;YACE,OAAO;YACP,MAAM;YACN,MAAM;YACN,MAAM,+NAAS;YACf,OAAO;YACP,IAAI;QACN;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,sNAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,8OAAC;gCAAK,WAAU;0CAA+D;;;;;;;;;;;;kCAKjF,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC;gCAAI,WAAU;;oCAAmJ;kDAC1J,8OAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;0CAE3C,8OAAC,oJAAa;;;;;;;;;;;;;;;;;0BAInB,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC;gCAAG,WAAU;;oCAAoD;kDACvD,8OAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;0CAE9C,8OAAC;gCAAE,WAAU;0CAA4C;;;;;;;;;;;;kCAK3D,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,kBACZ,8OAAC,0LAAI;gCAAe,MAAM,EAAE,IAAI;gCAAE,WAAU;0CAC1C,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAW,CAAC,UAAU,EAAE,EAAE,EAAE,CAAC,gHAAgH,CAAC;sDACjJ,cAAA,8OAAC,EAAE,IAAI;gDAAC,WAAW,GAAG,EAAE,KAAK,CAAC,UAAU,CAAC;;;;;;;;;;;sDAG3C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DACX,EAAE,KAAK;;;;;;8DAEV,8OAAC;oDAAE,WAAU;8DACV,EAAE,IAAI;;;;;;;;;;;;sDAIX,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,sOAAY;gDAAC,WAAU;;;;;;;;;;;;;;;;;+BAhBnB,EAAE,KAAK;;;;;;;;;;;;;;;;;;;;;;AAyB9B"}}]
}