{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\" \n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props} // ✅ FIXED: Inside the brackets\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props} // ✅ FIXED\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props} // ✅ FIXED\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} // ✅ FIXED\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div \n    ref={ref} \n    className={cn(\"p-6 pt-0\", className)} \n    {...props} // ✅ FIXED\n  />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props} // ✅ FIXED\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/actions/chat.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { auth } from \"@/auth\";\r\nimport clientPromise from \"@/lib/mongodb\";\r\nimport { GoogleGenerativeAI, SchemaType } from \"@google/generative-ai\";\r\n\r\nconst delay = (ms: number) => new Promise((res) => setTimeout(res, ms));\r\n\r\n// Define the Schema once to ensure consistent output format\r\nconst responseSchema = {\r\n  type: SchemaType.OBJECT,\r\n  properties: {\r\n    reflection: {\r\n      type: SchemaType.STRING,\r\n      description: \"Analysis of the unspoken social subtext and intent.\",\r\n    },\r\n    reassurance: {\r\n      type: SchemaType.STRING,\r\n      description: \"Validating message to reduce social anxiety/self-blame.\",\r\n    },\r\n    suggestion: {\r\n      type: SchemaType.STRING,\r\n      description: \"A concrete social script or actionable next step.\",\r\n    },\r\n  },\r\n  required: [\"reflection\", \"reassurance\", \"suggestion\"],\r\n};\r\n\r\nexport async function getAiResponse({\r\n  message,\r\n  lifeStage,\r\n  scenarioId,\r\n  scenarioContext,\r\n  isPractice,\r\n  imageBase64\r\n}: ChatParams) {\r\n  const session = await auth();\r\n  if (!session?.user) throw new Error(\"User must be authenticated.\");\r\n\r\n  const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;\r\n  if (!apiKey) {\r\n    return {\r\n      reflection: \"The mirror is currently disconnected.\",\r\n      reassurance: \"The system cannot find its credentials.\",\r\n      suggestion: \"Check your .env.local file and restart the server.\"\r\n    };\r\n  }\r\n\r\n  const genAI = new GoogleGenerativeAI(apiKey);\r\n  // Using gemini-2.0-flash for optimal speed and multimodal performance\r\n  const model = genAI.getGenerativeModel({ \r\n    model: \"gemini-3-flash\",\r\n    // System instruction acts as the primary persona anchor\r\n    systemInstruction: isPractice \r\n      ? `You are a Social Coach. Scenario: ${scenarioId}. Context: ${scenarioContext}.`\r\n      : `You are the 'Social Mirror'. Goal: Explicitly decode subtext for ASD Level 1 users.`\r\n  });\r\n\r\n  try {\r\n    const parts: any[] = [\r\n      { text: `User Life Stage: ${lifeStage}` },\r\n      { text: `Message to Analyze: ${message || \"Please analyze this social artifact.\"}` }\r\n    ];\r\n\r\n    if (imageBase64 && imageBase64.includes(\",\")) {\r\n      parts.push({\r\n        inlineData: { data: imageBase64.split(\",\")[1], mimeType: \"image/png\" }\r\n      });\r\n    }\r\n\r\n    let result;\r\n    let retries = 0;\r\n    const maxRetries = 2;\r\n\r\n    while (retries <= maxRetries) {\r\n      try {\r\n        result = await model.generateContent({\r\n          contents: [{ role: \"user\", parts }],\r\n          generationConfig: { \r\n            responseMimeType: \"application/json\", \r\n            responseSchema: responseSchema, // Forces schema adherence\r\n            temperature: 0.7 \r\n          },\r\n        });\r\n        break; \r\n      } catch (e: any) {\r\n        if (e.status === 429 && retries < maxRetries) {\r\n          retries++;\r\n          await delay(2000 * retries); // Exponential backoff\r\n          continue;\r\n        }\r\n        throw e;\r\n      }\r\n    }\r\n\r\n    const text = result?.response?.text();\r\n    if (!text) throw new Error(\"EMPTY_RESPONSE\");\r\n\r\n    // With responseSchema, the output is guaranteed to be valid JSON\r\n    const data = JSON.parse(text);\r\n\r\n    // PERSISTENCE to the 'Private Vault'\r\n    const client = await clientPromise;\r\n    const db = client.db(\"mirrorDB\"); \r\n    await db.collection(\"chat_history\").insertOne({\r\n      userId: session.user.id,\r\n      lifeStage,\r\n      userMessage: message,\r\n      aiResponse: data,\r\n      timestamp: new Date(),\r\n    });\r\n\r\n    return data;\r\n\r\n  } catch (error: any) {\r\n    console.error(\"Mirror Engine Error:\", error);\r\n    \r\n    if (error.status === 429) {\r\n      return {\r\n        reflection: \"The mirror is overwhelmed by too many requests.\",\r\n        reassurance: \"Just like social situations, sometimes tech needs a break.\",\r\n        suggestion: \"Wait 60 seconds and try again.\"\r\n      };\r\n    }\r\n\r\n    return {\r\n      reflection: \"The mirror is momentarily hazy.\",\r\n      reassurance: \"Social interactions take practice, and so does technology.\",\r\n      suggestion: \"Try rephrasing or refreshing the page.\"\r\n    };\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;MA4BsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///D:/conversational-mirror-asd/src/app/%28dashboard%29/dashboard/generalchat/ChatDashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { \r\n  Send, Bot, Sparkles, ArrowLeft, Loader2, MessageCircle,\r\n  ShieldCheck, Paperclip, Mic, MicOff, X, User \r\n} from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { getAiResponse } from \"@/actions/chat\";\r\nimport Link from \"next/link\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Message {\r\n  role: \"user\" | \"ai\";\r\n  content: string;\r\n  reflection?: string;\r\n  reassurance?: string;\r\n  suggestion?: string;\r\n  attachment?: string;\r\n}\r\n\r\nexport function ChatDashboard({ \r\n  userStage, \r\n  scenarioId, \r\n  scenarioContext,\r\n  isPractice = false \r\n}: { \r\n  userStage: string; \r\n  scenarioId?: string; \r\n  scenarioContext?: string;\r\n  isPractice?: boolean;\r\n}) {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [attachedImage, setAttachedImage] = useState<string | null>(null);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Auto-scroll to bottom whenever messages or typing state changes\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages, isTyping]);\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (isPractice) return; \r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => setAttachedImage(reader.result as string);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if ((!input.trim() && !attachedImage) || isTyping) return;\r\n\r\n    const userMsg = input.trim();\r\n    const currentImg = attachedImage;\r\n    \r\n    setInput(\"\");\r\n    setAttachedImage(null);\r\n    setIsRecording(false);\r\n    \r\n    setMessages((prev) => [...prev, { \r\n      role: \"user\", \r\n      content: userMsg || (currentImg ? \"Shared a screenshot for decoding\" : \"Voice response sent\"), \r\n      attachment: currentImg || undefined \r\n    }]);\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      const response = await getAiResponse({\r\n        message: userMsg,\r\n        lifeStage: userStage,\r\n        scenarioId: scenarioId || \"General\",\r\n        scenarioContext: scenarioContext || \"General open-ended conversation.\",\r\n        isPractice: isPractice,\r\n        imageBase64: currentImg\r\n      });\r\n      \r\n      setMessages((prev) => [...prev, { \r\n        role: \"ai\", \r\n        content: response.reflection, \r\n        reassurance: response.reassurance,\r\n        suggestion: response.suggestion \r\n      }]);\r\n    } catch (error) {\r\n      console.error(\"Mirror Connection Error:\", error);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-[#F8FAFC] relative\">\r\n      {/* --- REFINED HEADER WITH NAVIGATION --- */}\r\n      <nav className=\"sticky top-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 px-8 py-4 flex items-center justify-between\">\r\n        \r\n        {/* Navigation Link (Single Source of Exit) */}\r\n        <Link\r\n          href=\"/dashboard\"\r\n          className=\"flex items-center gap-2 text-slate-400 hover:text-indigo-600 font-bold text-[10px] uppercase tracking-widest transition-colors group shrink-0\"\r\n        >\r\n          <ArrowLeft className=\"w-4 h-4 group-hover:-translate-x-1 transition-transform\" />\r\n          <span className=\"hidden sm:inline\">Back to Hub</span>\r\n        </Link>\r\n\r\n        {/* Centered Identity Group */}\r\n        <div className=\"flex items-center gap-2 absolute left-1/2 -translate-x-1/2\">\r\n          <div className=\"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white shadow-md\">\r\n            <MessageCircle className=\"w-4 h-4\" />\r\n          </div>\r\n          <span className=\"font-black text-slate-900 uppercase tracking-tighter text-sm\">\r\n            {isPractice ? `Mirror: ${scenarioId}` : \"Social Sandbox\"}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Life Stage Indicator */}\r\n        <div className=\"hidden md:flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full border border-indigo-100 shadow-sm shrink-0\">\r\n          <ShieldCheck className=\"w-3.5 h-3.5 text-indigo-600\" />\r\n          <span className=\"text-[9px] font-black text-indigo-600 uppercase tracking-widest\">{userStage} Mode</span>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* --- CHAT AREA --- */}\r\n      <main className=\"flex-1 overflow-y-auto p-6 space-y-8 scrollbar-hide\">\r\n        <div className=\"max-w-4xl mx-auto space-y-8\">\r\n          \r\n          {/* Mission Briefing Card (Article 10: Explicit Mentalizing) */}\r\n          {messages.length === 0 && isPractice && (\r\n            <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }}>\r\n              <Card className=\"p-8 border-dashed border-2 border-indigo-200 bg-indigo-50/50 rounded-[2.5rem] text-center\">\r\n                <Sparkles className=\"w-8 h-8 text-indigo-500 mx-auto mb-3\" />\r\n                <h2 className=\"text-xl font-black text-indigo-900 uppercase tracking-tight mb-2\">Mission Brief</h2>\r\n                <p className=\"text-indigo-700 font-medium italic\">\"{scenarioContext}\"</p>\r\n              </Card>\r\n            </motion.div>\r\n          )}\r\n\r\n          <AnimatePresence initial={false}>\r\n            {messages.map((msg, idx) => (\r\n              <motion.div \r\n                key={idx} \r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\r\n              >\r\n                <div className={`flex flex-col ${msg.role === \"user\" ? \"items-end\" : \"items-start\"} max-w-[85%] gap-2`}>\r\n                  {msg.attachment && (\r\n                    <img src={msg.attachment} alt=\"Screenshot\" className=\"w-64 rounded-2xl shadow-sm border border-slate-200 mb-2\" />\r\n                  )}\r\n                  <div className={`p-5 rounded-[2rem] font-medium shadow-sm ${msg.role === \"user\" ? \"bg-indigo-600 text-white rounded-tr-none\" : \"bg-white border text-slate-700 rounded-tl-none\"}`}>\r\n                    {msg.content}\r\n                  </div>\r\n                  {msg.role === \"ai\" && (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 w-full\">\r\n                      <div className=\"p-4 bg-emerald-50 rounded-2xl border border-emerald-100 text-[11px] font-bold text-emerald-800 italic\">\r\n                        \"{msg.reassurance}\"\r\n                      </div>\r\n                      <div className=\"p-4 bg-blue-50 rounded-2xl border border-blue-100 text-[11px] font-bold text-blue-800\">\r\n                        Try: {msg.suggestion}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </AnimatePresence>\r\n\r\n          {/* Mirroring/Typing Loader */}\r\n          {isTyping && (\r\n            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"flex justify-start\">\r\n              <div className=\"bg-white px-6 py-4 rounded-[2rem] shadow-sm flex items-center gap-3 border border-slate-100\">\r\n                <Loader2 className=\"w-4 h-4 animate-spin text-indigo-600\" />\r\n                <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest\">Mirroring Tone...</span>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n          \r\n          <div ref={scrollRef} />\r\n        </div>\r\n      </main>\r\n\r\n      {/* --- INPUT AREA --- */}\r\n      <div className=\"sticky bottom-0 w-full bg-white pt-4 pb-8 px-6 border-t border-slate-100\">\r\n        <form onSubmit={handleSendMessage} className=\"max-w-4xl mx-auto relative\">\r\n          \r\n          {attachedImage && (\r\n            <div className=\"absolute -top-24 left-4 bg-white p-2 rounded-xl shadow-xl border border-indigo-100 flex items-center gap-2\">\r\n              <img src={attachedImage} className=\"w-16 h-16 object-cover rounded-lg\" alt=\"preview\" />\r\n              <button type=\"button\" onClick={() => setAttachedImage(null)} className=\"p-1 bg-slate-100 rounded-full text-rose-500 hover:bg-rose-50 transition-colors\">\r\n                <X size={16}/>\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Context-Specific Action Icon */}\r\n            {isPractice ? (\r\n              <button \r\n                type=\"button\" \r\n                onClick={() => setIsRecording(!isRecording)}\r\n                className={`p-4 rounded-full transition-all shadow-sm border-2 ${\r\n                  isRecording \r\n                    ? 'bg-rose-100 text-rose-600 border-rose-200 animate-pulse ring-4 ring-rose-50' \r\n                    : 'bg-white border-slate-100 text-slate-400 hover:text-indigo-600 hover:border-indigo-100'\r\n                }`}\r\n              >\r\n                {isRecording ? <MicOff size={24} /> : <Mic size={24} />}\r\n              </button>\r\n            ) : (\r\n              <>\r\n                <input type=\"file\" ref={fileInputRef} hidden accept=\"image/*\" onChange={handleFileChange} />\r\n                <button \r\n                  type=\"button\" \r\n                  title=\"Upload Screenshot\"\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  className=\"p-4 bg-white border-2 border-slate-100 rounded-full text-slate-400 hover:text-indigo-600 hover:border-indigo-100 transition-all shadow-sm\"\r\n                >\r\n                  <Paperclip size={24} />\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <input \r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder={\r\n                isRecording \r\n                  ? \"Listening to your tone...\" \r\n                  : isPractice \r\n                    ? \"Practice your response verbally or type...\" \r\n                    : \"Upload screenshot or ask the mirror...\"\r\n              }\r\n              className=\"flex-1 h-20 px-8 rounded-[2.5rem] bg-slate-50 border-2 border-transparent focus:border-indigo-500 outline-none text-lg font-medium transition-all\"\r\n            />\r\n\r\n            <Button \r\n              type=\"submit\"\r\n              disabled={isTyping || (!input.trim() && !attachedImage)}\r\n              className=\"w-20 h-20 rounded-full bg-indigo-600 hover:bg-indigo-700 shadow-lg active:scale-95 transition-all\"\r\n            >\r\n              {isTyping ? <Loader2 className=\"animate-spin text-white\" /> : <Send className=\"w-8 h-8 text-white\" />}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}